<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>LightsOut</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
  </head>
  <style type="text/css">
  </style>
  <body>
    
    <script type="text/javascript">
    function loadScript (url) {
        return new Promise((resolve) => {
            const script = document.createElement('script')
            script.src = url
            script.onload = resolve
            document.body.appendChild(script)
        })
    }
    async function loadAll() {
        await loadScript('https://scrapbox.io/api/code/masui/test/test.js')
        alert(data)
    }
    $(function(){
        loadAll()
        // setTimeout(function(){ alert(data) }, 2000)
    })

    navigator.geolocation.getCurrentPosition(successCallback, errorCallback);
    function successCallback(position) {
        mapsurl = "https://maps.google.com/maps?q=" +
        position.coords.latitude + "," +
        position.coords.longitude;
        alert(mapsurl)
        // location.href = mapsurl;
    }
    function errorCallback(error) {
        var err_msg = "";
        switch(error.code)
        {
          case 1:
            err_msg = "位置情報の利用が許可されていません";
            break;
          case 2:
            err_msg = "デバイスの位置が判定できません";
            break;
          case 3:
            err_msg = "タイムアウトしました";
            break;
        }
        alert(err_msg)
        //document.getElementById("show_result").innerHTML = err_msg;
    }


    /*
    fetch('https://scrapbox.io/api/code/masui/test/test.js').then((res) => {
        return res.text()
    }).then((data) => {
      alert(data)
    })
    */
    </script>
    
  </body>
</html>
